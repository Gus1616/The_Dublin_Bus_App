(function(t,i){typeof exports=="object"&&typeof module!="undefined"?module.exports=i(require("vue")):typeof define=="function"&&define.amd?define(["vue"],i):(t=typeof globalThis!="undefined"?globalThis:t||self,t["vue-tweet"]=i(t.Vue))})(this,function(t){"use strict";var g=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var y=(t,i)=>{var f={};for(var r in t)b.call(t,r)&&i.indexOf(r)<0&&(f[r]=t[r]);if(t!=null&&g)for(var r of g(t))i.indexOf(r)<0&&$.call(t,r)&&(f[r]=t[r]);return f};var i=(e,w)=>{const d=e.__vccOpts||e;for(const[s,l]of w)d[s]=l;return d};const f=["ar","bn","cs","da","de","el","en","es","fa","fi","fil","fr","he","hi","hu","id","it","ja","ko","msa","nl","no","pl","pt","ro","ru","sv","th","tr","uk","ur","vi","zh-cn","zh-tw"],r=/^(https?:\/\/)?(www\.)?twitter\.com\/.*\/status(?:es)?\/(?<tweetId>[^\/\?]\d+)$/i,v=t.defineComponent({props:{tweetId:{type:String,default:""},tweetUrl:{type:String,default:""},conversation:{type:String,default:"all",validator:e=>["all","none"].includes(e)},cards:{type:String,default:"visible",validator:e=>["visible","hidden"].includes(e)},width:{type:[String,Number],default:"auto",validator:e=>typeof e=="string"?e==="auto":typeof e=="number"?e>=250&&e<=550:!1},align:{type:[String,void 0],default:void 0,validator:e=>["left","right","center",void 0].includes(e)},theme:{type:String,default:"light",validator:e=>["light","dark"].includes(e)},lang:{type:String,default:"en",validator:e=>f.includes(e)},dnt:{type:Boolean,default:!1}},emits:{"tweet-load-success":e=>!!e,"tweet-load-error":()=>!0},setup(e,{attrs:w,emit:d}){const s=t.ref(!0),l=t.ref(!1),u=t.ref();t.onMounted(()=>{p()}),t.watch(e,()=>{p()});function p(){if(!(window.twttr&&window.twttr.ready)){k("https://platform.twitter.com/widgets.js",p);return}window.twttr.ready().then(({widgets:n})=>{s.value=!0,l.value=!1,u.value&&(u.value.innerHTML="");const{tweetId:o,tweetOptions:a}=T();n.createTweet(o,u.value,a).then(async c=>{await t.nextTick(),c?d("tweet-load-success",c):(l.value=!0,d("tweet-load-error"))}).finally(()=>{s.value=!1})})}function T(){var h;let c=e,{tweetId:n,tweetUrl:o}=c,a=y(c,["tweetId","tweetUrl"]);if(n&&o)throw new Error("Cannot provide both tweet-id and tweet-url.");if(n){if(!/^\d+$/.test(n))throw new Error("Invalid tweet-id, please provide a valid numerical tweet-id.")}else if(o){const m=o.trim().match(r);if(m)n=(h=m.groups)==null?void 0:h.tweetId;else throw new Error("Invalid tweet-url.")}else throw new Error("Must provide either tweet-id or tweet-url.");return{tweetId:n,tweetOptions:a}}function k(n,o){const a=document.createElement("script");a.setAttribute("src",n),a.addEventListener("load",()=>o(),!1),document.body.appendChild(a)}return{tweetContainerRef:u,isLoading:s,hasError:l,attrs:w}}});function E(e,w,d,s,l,u){return t.openBlock(),t.createElementBlock(t.Fragment,null,[e.isLoading?t.renderSlot(e.$slots,"loading",{key:0}):e.hasError?t.renderSlot(e.$slots,"error",{key:1}):t.createCommentVNode("",!0),t.createElementVNode("div",t.mergeProps({ref:"tweetContainerRef"},e.attrs),null,16)],64)}var S=i(v,[["render",E]]);return S});
